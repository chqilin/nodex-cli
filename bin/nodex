#!/usr/bin/env node

const program = require('commander')
const chalk = require('chalk')
const path = require('path')
const logger = require('../lib/logger')
const fs = require('fs-extra')

program.version(require('../package').version, '-v, --version')
    .usage('<command> [options]')

program
    .command('init <project>')
    .description('init a new project')
    .action((project) => {
        const dest = path.resolve(project)
        if (fs.pathExistsSync(dest)) {
            logger.fatal(`dest directory ${project} is not empty`)
            return
        }
    })

program.on('command:*', function () {
    console.error(chalk.red('Invalid command: %s \nSee --help for a list of available commands.'), program.args.join(' '))
    process.exit(1)
})

program.parse(process.argv)
